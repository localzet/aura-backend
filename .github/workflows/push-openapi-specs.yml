#name: Build&Push OpenAPI Specs
#
#on:
#  push:
#    tags:
#      - '*'
#
#  workflow_dispatch:
#
#jobs:
#  send-start-deploy-telegram-message:
#    name: ğŸ“¢ Send Telegram message
#    runs-on: ubuntu-latest
#    steps:
#      - name: ğŸ”§ Checkout source code
#        uses: actions/checkout@v4
#
#      - name: ğŸ“¬ Send Telegram message
#        uses: appleboy/telegram-action@master
#        with:
#          to: ${{ secrets.TELEGRAM_CHAT_ID }}
#          token: ${{ secrets.TELEGRAM_TOKEN }}
#          message: |
#            ğŸ¹ ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ OpenAPI ${{ github.REPOSITORY }}
#            ĞšĞ¾Ğ¼Ğ¼Ğ¸Ñ‚: ${{ github.event.head_commit.message }}
#            ĞĞ²Ñ‚Ğ¾Ñ€: ${{ github.event.head_commit.author.name }}
#            Ğ’Ñ€ĞµĞ¼Ñ: ${{ github.event.head_commit.timestamp }}
#
#  push-openapi:
#    name: Push OpenAPI specs to R2
#    runs-on: ubuntu-latest
#    steps:
#      - name: ğŸ”§ Checkout source code
#        uses: actions/checkout@v4
#
#      - name: ğŸ”§ Setup Node
#        uses: actions/setup-node@v4
#        with:
#          node-version: '22.x'
#
#      - name: ğŸ”§ Install dependencies
#        run: npm ci
#
#      - name: ğŸ”§ Generate OpenAPI JSON
#        run: npm run generate:openapi
#
#      - uses: ryand56/r2-upload-action@latest
#        with:
#          r2-account-id: ${{ secrets.R2_ACCOUNT_ID }}
#          r2-access-key-id: ${{ secrets.R2_ACCESS_KEY_ID }}
#          r2-secret-access-key: ${{ secrets.R2_SECRET_ACCESS_KEY }}
#          r2-bucket: ${{ secrets.R2_BUCKET }}
#          source-dir: ./openapi.json
#          destination-dir: ./docs/
#
#  send-finish-tg-msg:
#    name: ğŸ“¢ Send Telegram message
#    needs: [push-openapi]
#    runs-on: ubuntu-latest
#    steps:
#      - name: ğŸ”§ Checkout source code
#        uses: actions/checkout@v4
#
#      - name: ğŸ“¬ Send Telegram message
#        uses: appleboy/telegram-action@master
#        with:
#          to: ${{ secrets.TELEGRAM_CHAT_ID }}
#          token: ${{ secrets.TELEGRAM_TOKEN }}
#          message: |
#            âœ… OpenAPI Ğ´Ğ»Ñ ${{ github.REPOSITORY }} ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ğ½
#            Ğ¢ĞµĞ³: *${{ github.sha }}*
#            ĞšĞ¾Ğ¼Ğ¼Ğ¸Ñ‚: ${{ github.event.head_commit.message }}
#            ĞĞ²Ñ‚Ğ¾Ñ€: ${{ github.event.head_commit.author.name }}
#            Ğ’Ñ€ĞµĞ¼Ñ: ${{ github.event.head_commit.timestamp }}
#
#  notify-on-error:
#    name: ğŸ“¢ Send Telegram message
#    runs-on: ubuntu-latest
#    needs: [push-openapi]
#    if: failure()
#    steps:
#      - name: ğŸ”§ Checkout source code
#        uses: actions/checkout@v4
#
#      - name: ğŸš¨ Send error notification
#        uses: appleboy/telegram-action@master
#        with:
#          to: ${{ secrets.TELEGRAM_CHAT_ID }}
#          token: ${{ secrets.TELEGRAM_TOKEN }}
#          message: |
#            âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ² ${{ github.REPOSITORY }}: Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ² ÑĞ±Ğ¾Ñ€ĞºĞµ
